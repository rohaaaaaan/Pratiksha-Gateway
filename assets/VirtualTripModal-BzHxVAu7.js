import{i as ue,a as de,u as ee,m as fe,r as E,M as me,b as he,f as pe,c as ye,d as W,e as ge,g as ve,h as xe,j as te,k as je,l as Ae,n as Ne,o as be,s as Se,p as Ee,V as Ve,q as we,t as Me,v as Le,S as Te,H as De,w as K,x as Ie,y as Oe,z as Ce,A as a,B as ne,C as N}from"./index-A6BPYf9x.js";const ke=(e,t,n)=>{const s=t-e;return((n-e)%s+s)%s+e};function se(e,t){return ue(e)?e[ke(0,e.length,t)]:e}class Fe{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t){const n=this.animations.map(s=>s.attachTimeline(t));return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return $(this.animations,"duration")}get iterationDuration(){return $(this.animations,"iterationDuration")}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function $(e,t){let n=0;for(let s=0;s<e.length;s++){const i=e[s][t];i!==null&&i>n&&(n=i)}return n}class Ge extends Fe{then(t,n){return this.finished.finally(t).then(()=>{})}}function Ke(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],i=e[1+n],o=e[2+n],r=e[3+n],l=de(i,o,r);return t?l(s):l}function ae(e){const t=ee(()=>fe(e)),{isStatic:n}=E.useContext(me);if(n){const[,s]=E.useState(e);E.useEffect(()=>t.on("change",s),[])}return t}function ie(e,t){const n=ae(t()),s=()=>n.set(t());return s(),he(()=>{const i=()=>pe.preRender(s,!1,!0),o=e.map(r=>r.on("change",i));return()=>{o.forEach(r=>r()),ye(s)}}),n}function Be(e){W.current=[],e();const t=ie(W.current,e);return W.current=void 0,t}function Re(e,t,n,s){if(typeof e=="function")return Be(e);const i=typeof t=="function"?t:Ke(t,n,s);return Array.isArray(e)?q(e,i):q([e],([o])=>i(o))}function q(e,t){const n=ee(()=>[]);return ie(e,()=>{n.length=0;const s=e.length;for(let i=0;i<s;i++)n[i]=e[i].get();return t(n)})}function P(e){return typeof e=="object"&&!Array.isArray(e)}function re(e,t,n,s){return typeof e=="string"&&P(t)?ge(e,n,s):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function We(e,t,n){return e*(t+1)}function J(e,t,n,s){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):s.get(t)??e}function Pe(e,t,n){for(let s=0;s<e.length;s++){const i=e[s];i.at>t&&i.at<n&&(xe(e,i),s--)}}function ze(e,t,n,s,i,o){Pe(e,i,o);for(let r=0;r<t.length;r++)e.push({value:t[r],at:ve(i,o,s[r]),easing:se(n,r)})}function He(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function Qe(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const _e="easeInOut";function Ue(e,{defaultTransition:t={},...n}={},s,i){const o=t.duration||.3,r=new Map,l=new Map,m={},c=new Map;let g=0,d=0,C=0;for(let w=0;w<e.length;w++){const p=e[w];if(typeof p=="string"){c.set(p,d);continue}else if(!Array.isArray(p)){c.set(p.name,J(d,p.at,g,c));continue}let[V,y,f={}]=p;f.at!==void 0&&(d=J(d,f.at,g,c));let h=0;const M=(v,x,b,L=0,T=0)=>{const u=Ze(v),{delay:B=0,times:j=je(u),type:R="keyframes",repeat:k,repeatType:ut,repeatDelay:dt=0,...ce}=x;let{ease:S=t.ease||"easeOut",duration:A}=x;const z=typeof B=="function"?B(L,T):B,H=u.length,Q=be(R)?R:i?.[R||"keyframes"];if(H<=2&&Q){let D=100;if(H===2&&Je(u)){const I=u[1]-u[0];D=Math.abs(I)}const F={...ce};A!==void 0&&(F.duration=Se(A));const G=Ae(F,D,Q);S=G.ease,A=G.duration}A??(A=o);const _=d+z;j.length===1&&j[0]===0&&(j[1]=1);const U=j.length-u.length;if(U>0&&Ne(j,U),u.length===1&&u.unshift(null),k){A=We(A,k);const D=[...u],F=[...j];S=Array.isArray(S)?[...S]:[S];const G=[...S];for(let I=0;I<k;I++){u.push(...D);for(let O=0;O<D.length;O++)j.push(F[O]+(I+1)),S.push(O===0?"linear":se(G,O-1))}He(j,k)}const Z=_+A;ze(b,u,S,j,_,Z),h=Math.max(z+A,h),C=Math.max(Z,C)};if(te(V)){const v=X(V,l);M(y,f,Y("default",v))}else{const v=re(V,y,s,m),x=v.length;for(let b=0;b<x;b++){y=y,f=f;const L=v[b],T=X(L,l);for(const u in y)M(y[u],$e(f,u),Y(u,T),b,x)}}g=d,d+=h}return l.forEach((w,p)=>{for(const V in w){const y=w[V];y.sort(Qe);const f=[],h=[],M=[];for(let x=0;x<y.length;x++){const{at:b,value:L,easing:T}=y[x];f.push(L),h.push(Ee(0,C,b)),M.push(T||"easeOut")}h[0]!==0&&(h.unshift(0),f.unshift(f[0]),M.unshift(_e)),h[h.length-1]!==1&&(h.push(1),f.push(null)),r.has(p)||r.set(p,{keyframes:{},transition:{}});const v=r.get(p);v.keyframes[V]=f,v.transition[V]={...t,duration:C,ease:M,times:h,...n}}}),r}function X(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function Y(e,t){return t[e]||(t[e]=[]),t[e]}function Ze(e){return Array.isArray(e)?e:[e]}function $e(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const qe=e=>typeof e=="number",Je=e=>e.every(qe);function Xe(e,t){return e in t}class Ye extends Ve{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(Xe(n,t)){const s=t[n];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return we()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function et(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Me(e)&&!Le(e)?new Te(t):new De(t);n.mount(e),K.set(e,n)}function tt(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Ye(t);n.mount(e),K.set(e,n)}function nt(e,t){return te(e)||typeof e=="number"||typeof e=="string"&&!P(t)}function oe(e,t,n,s){const i=[];if(nt(e,t))i.push(Ie(e,P(t)&&t.default||t,n&&(n.default||n)));else{const o=re(e,t,s),r=o.length;for(let l=0;l<r;l++){const m=o[l],c=m instanceof Element?et:tt;K.has(m)||c(m);const g=K.get(m),d={...n};"delay"in d&&typeof d.delay=="function"&&(d.delay=d.delay(l,r)),i.push(...Oe(g,{...t,transition:d},{}))}}return i}function st(e,t,n){const s=[];return Ue(e,t,n,{spring:Ce}).forEach(({keyframes:o,transition:r},l)=>{s.push(...oe(l,o,r))}),s}function at(e){return Array.isArray(e)&&e.some(Array.isArray)}function it(e){function t(n,s,i){let o=[],r;if(at(n))o=st(n,s,e);else{const{onComplete:m,...c}=i||{};typeof m=="function"&&(r=m),o=oe(n,s,c,e)}const l=new Ge(o);return r&&l.finished.then(r),l}return t}const rt=it(),le=({images:e})=>{const[t,n]=E.useState(0);return E.useEffect(()=>{const s=setInterval(()=>{n(i=>(i+1)%e.length)},3500);return()=>clearInterval(s)},[e]),a.jsxs("div",{className:"carousel-container",children:[a.jsx(ne,{mode:"wait",children:a.jsx(N.img,{src:e[t],alt:"Trip visual",className:"carousel-image",initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:1}},e[t])}),a.jsx("div",{className:"carousel-overlay"})]})},ot=()=>{const e=ae(0),t=Re(e,[0,100],["0%","100%"]);return E.useEffect(()=>rt(e,100,{duration:2.5,ease:"easeInOut",repeat:1/0,repeatDelay:1}).stop,[e]),a.jsx(N.g,{className:"moving-plane-group",style:{"--flight-progress":t},children:a.jsx("path",{d:"M22 16L4 20L2 14L8 12L2 8L4 2L22 6L28 2L30 4L22 16Z",fill:"#f9cb28",transform:"translate(-15, -10) rotate(15)"})})},lt=({step:e})=>a.jsxs("div",{className:"travel-view-container",children:[a.jsx(le,{images:e.images}),a.jsxs("div",{className:"travel-overlay-content",children:[a.jsx("div",{className:"flight-path-container",children:a.jsxs("svg",{width:"300",height:"100",viewBox:"0 0 300 100",className:"flight-svg",children:[a.jsx("path",{d:"M 20 50 Q 150 -30 280 50",fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2",strokeDasharray:"5,5"}),a.jsx(N.path,{d:"M 20 50 Q 150 -30 280 50",fill:"none",stroke:"white",strokeWidth:"2",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2.5,ease:"easeInOut",repeat:1/0,repeatDelay:1}}),a.jsx(ot,{})]})}),a.jsxs("div",{className:"travel-route-info",children:[a.jsxs("div",{className:"city-node",children:[a.jsx("span",{className:"city-dot"}),a.jsx("span",{className:"city-name",children:e.from.split(" ")[0]})]}),a.jsx("div",{className:"travel-icon-large",children:e.mode==="flight"?"âœˆï¸":e.mode==="bus"?"ðŸšŒ":"ðŸš"}),a.jsxs("div",{className:"city-node",children:[a.jsx("span",{className:"city-dot"}),a.jsx("span",{className:"city-name",children:e.to.split(" ")[0]})]})]}),a.jsxs(N.div,{className:"travel-meta",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[a.jsx("div",{className:"travel-details-grid",children:e.details&&Object.entries(e.details).map(([t,n])=>a.jsxs("div",{className:"detail-item",children:[a.jsx("span",{className:"detail-label",children:t}),a.jsx("span",{className:"detail-value",children:n})]},t))}),a.jsx("p",{className:"travel-desc",style:{marginTop:"20px"},children:e.description})]})]})]}),ct=({step:e})=>a.jsxs("div",{className:"activity-view-container",children:[a.jsx(le,{images:e.images}),a.jsxs("div",{className:"activity-info-card",children:[a.jsx(N.h1,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:e.title}),a.jsx(N.div,{className:"activity-divider",initial:{width:0},animate:{width:"80px"},transition:{delay:.6,duration:.8}}),a.jsx(N.div,{className:"activity-details-grid",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},children:e.details&&Object.entries(e.details).map(([t,n])=>a.jsxs("div",{className:"detail-bubble",children:[a.jsx("span",{className:"bubble-label",children:t}),a.jsx("span",{className:"bubble-value",children:n})]},t))}),a.jsx(N.p,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:e.description})]})]}),mt=({isOpen:e,onClose:t,trip:n})=>{if(!e||!n)return null;const[s,i]=E.useState(0),o=()=>{s<n.steps.length-1&&i(c=>c+1)},r=()=>{s>0&&i(c=>c-1)};E.useEffect(()=>{const c=g=>{g.key==="ArrowRight"&&o(),g.key==="ArrowLeft"&&r(),g.key==="Escape"&&t()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[s,t,n.steps.length]);const l=n.steps[s],m=(s+1)/n.steps.length*100;return a.jsxs("div",{className:"virtual-trip-overlay",children:[a.jsx("div",{className:"trip-progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})}),a.jsxs("div",{className:"trip-header",children:[a.jsx("h2",{children:n.title}),a.jsx("button",{className:"close-btn",onClick:t,children:"âœ•"})]}),a.jsx("div",{className:"trip-content",children:a.jsx(ne,{mode:"wait",children:a.jsx(N.div,{className:"step-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:l.type==="travel"?a.jsx(lt,{step:l}):a.jsx(ct,{step:l})},l.id)})}),a.jsxs("div",{className:"trip-controls",children:[a.jsx("button",{className:"control-btn prev",onClick:r,disabled:s===0,children:"Previous"}),a.jsxs("div",{className:"step-indicator",children:["Step ",s+1," / ",n.steps.length]}),a.jsx("button",{className:"control-btn next",onClick:s===n.steps.length-1?t:o,children:s===n.steps.length-1?"Finish Trip":"Next Step â†’"})]})]})};export{mt as default};
